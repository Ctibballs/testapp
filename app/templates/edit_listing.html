{% extends "base.html" %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Edit Listing</h1>
<p class="text-sm text-slate-600 mb-2">{{ listing.address }} â€” {{ listing.suburb }} ({{ listing.office }})</p>

<form method="post" enctype="multipart/form-data" class="space-y-3 max-w-2xl p-4 rounded-xl border border-slate-200 bg-white">
  <label class="block">
    <span class="text-sm">Listing URL</span>
    <input class="mt-1 rounded-lg border-slate-300 w-full" name="listing_url" value="{{ listing.listing_url or '' }}">
  </label>
  <label class="block">
    <span class="text-sm">Description</span>
    <textarea class="mt-1 rounded-lg border-slate-300 w-full" name="description" rows="5">{{ listing.description or '' }}</textarea>
  </label>
  <label class="flex items-center gap-2">
    <input type="checkbox" name="needs_buyers" {% if listing.needs_buyers %}checked{% endif %}>
    <span class="text-sm">Needs buyers</span>
  </label>
  <div>
    <span class="text-sm">Upload images</span>
    <input class="block mt-1" type="file" name="images" accept="image/*" multiple>
    {% if listing.images %}
      <div class="mt-3 grid grid-cols-4 gap-2">
        {% for img in listing.images %}
          <img src="{{ url_for('static', filename='uploads/' + img.path) }}" class="rounded-lg border border-slate-200">
        {% endfor %}
      </div>
    {% endif %}
  </div>
  <div class="flex gap-2">
    <button class="px-3 py-2 rounded-lg bg-sky-600 text-white">Save</button>
    <a class="px-3 py-2 rounded-lg border border-slate-200" href="{{ url_for('manage_listings') }}">Back</a>
  </div>
</form>
{% endblock %}
